# OpenAPI 3.1.0 Template for ChatGPT Custom Actions
# Replace all <!-- REPLACE: ... --> comments with your values
#
# Validation: npx @apidevtools/swagger-cli validate openapi.yaml

openapi: "3.1.0"
info:
  title: "My GPT Action API" # <!-- REPLACE: Your API name -->
  description: |
    API for the [GPT_NAME] Custom GPT.
    This API provides [BRIEF_DESCRIPTION_OF_CAPABILITIES].
    <!-- REPLACE: Describe what this API does. GPT reads this to understand the overall purpose. -->
  version: "1.0.0"

servers:
  - url: "https://your-api.example.com" # <!-- REPLACE: Your production HTTPS URL -->
    description: "Production server"

paths:
  # --- Example: Search Endpoint ---
  /api/search:
    get:
      operationId: searchItems
      summary: "Search for items"
      description: |
        Search the catalog for items matching the user's query.
        Call this endpoint when the user wants to find, browse, filter, or look for items.
        Supports filtering by category and price range.
        <!-- REPLACE: Detailed description of WHEN to call this endpoint -->
      parameters:
        - name: q
          in: query
          required: true
          schema:
            type: string
          description: |
            Search keywords extracted from the user's message.
            Example: "red shoes", "laptop under $500", "organic coffee"
            <!-- REPLACE: Explain what to extract from the user's message -->
        - name: category
          in: query
          required: false
          schema:
            type: string
            enum: ["electronics", "clothing", "food", "books"]
            # <!-- REPLACE: Your actual categories -->
          description: |
            Filter by category. Only include if the user explicitly mentions a category.
        - name: max_price
          in: query
          required: false
          schema:
            type: number
          description: |
            Maximum price in USD. Only include if the user specifies a budget.
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 5
            maximum: 20
          description: |
            Number of results to return. Default 5. Increase if user asks for "more" or "all".
      responses:
        "200":
          description: "Search results"
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          description: "Unique item ID"
                        name:
                          type: string
                          description: "Item name — display this to the user"
                        description:
                          type: string
                          description: "Short description of the item"
                        price:
                          type: number
                          description: "Price in USD — format as currency when displaying"
                        url:
                          type: string
                          description: "Link to the item — include in response for user to click"
                  total_count:
                    type: integer
                    description: "Total matching results. Tell user if there are more results available."
                  message:
                    type: string
                    description: "Human-readable summary. Include this in your response."
        "400":
          description: "Invalid request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "429":
          description: "Rate limited"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  # --- Example: Get Details Endpoint ---
  /api/items/{id}:
    get:
      operationId: getItemDetails
      summary: "Get detailed information about a specific item"
      description: |
        Retrieve full details for a specific item by ID.
        Call this when the user asks for more information about a specific item,
        or when they reference an item by name that appeared in search results.
        <!-- REPLACE: When to call this endpoint -->
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: "The item ID from search results"
      responses:
        "200":
          description: "Item details"
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  name:
                    type: string
                  description:
                    type: string
                    description: "Full description — present this to the user"
                  price:
                    type: number
                  specifications:
                    type: object
                    description: "Key-value pairs of item specs. Display as a table."
                    additionalProperties:
                      type: string
                  availability:
                    type: string
                    enum: ["in_stock", "out_of_stock", "pre_order"]
                    description: "Stock status — always tell the user about availability"
                  url:
                    type: string
        "404":
          description: "Item not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  # --- Example: Create/Submit Endpoint ---
  /api/submissions:
    post:
      operationId: createSubmission
      summary: "Submit a new entry"
      description: |
        Create a new submission with the user's data.
        Call this when the user wants to submit, save, or create something.
        Confirm with the user before calling this endpoint.
        <!-- REPLACE: When to call this endpoint -->
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: ["title", "content"]
              properties:
                title:
                  type: string
                  description: "Title for the submission. Extract from user's message."
                content:
                  type: string
                  description: "Main content. Use the user's message as-is or summarize."
                tags:
                  type: array
                  items:
                    type: string
                  description: "Optional tags. Suggest relevant tags based on content."
      responses:
        "201":
          description: "Submission created"
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: "ID of the created submission"
                  url:
                    type: string
                    description: "URL to view the submission — share with user"
                  message:
                    type: string
                    description: "Confirmation message — relay to user"
        "400":
          description: "Validation error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

components:
  schemas:
    Error:
      type: object
      properties:
        error:
          type: object
          properties:
            code:
              type: string
              description: "Machine-readable error code"
            message:
              type: string
              description: "Human-readable error message. Relay this to the user."
            suggestion:
              type: string
              description: "Suggested next action. Follow this suggestion."

  # Uncomment and configure if using authentication
  # securitySchemes:
  #   ApiKeyAuth:
  #     type: apiKey
  #     in: header
  #     name: X-API-Key

# Uncomment if using authentication
# security:
#   - ApiKeyAuth: []
